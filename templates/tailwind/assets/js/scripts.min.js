jQuery(document).ready(function(o){var i,l,t,n='<a href="javascript:void(0);" class="file-delete" data-file-id="{file-id}"><span class="icon-file-delete">\n                        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><defs></defs><g id="Trash"><path class="cls-1" d="M40,7L38.38,39.4a8,8,0,0,1-8,7.6H17.61a8,8,0,0,1-8-7.6L8,7"/><line class="cls-1" x1="4" y1="7" x2="44" y2="7"/><line class="cls-1" x1="18.5" y1="15" x2="19.5" y2="37"/><line class="cls-1" x1="29.5" y1="15" x2="28.5" y2="37"/><path class="cls-1" d="M16,7l1.09-3.26A4,4,0,0,1,20.88,1h6.23a4,4,0,0,1,3.79,2.74L32,7"/></g></svg>\n                    </span>';if(o(".entry .project-status").length)for(var e=[".current",".next",".completion-date"],s=0;s<3;s++)o(".project-status .leco-cp-container "+e[s]+" .value").html(o(".entry .project-status "+e[s]+" .value").text()),o(".project-status .leco-cp-container "+e[s]+" .label").html(o(".entry .project-status "+e[s]+" .label").text());o(document).on("click","[data-leco-cp-lity]",function(e){e.preventDefault();var s=o(this).attr("href");i=lity(s,{template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close><?xml version="1.0" encoding="utf-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve"><style type="text/css">\n\t.st0{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n</style><title>Close</title><g id="Fail"><circle class="st0" cx="24" cy="24" r="23"></circle><g id="Cross"><line class="st0" x1="15" y1="15" x2="33" y2="33"></line><line class="st0" x1="15" y1="33" x2="33" y2="15"></line></g></g></svg></button></div></div></div>'},o(this))}).on("click","[data-leco-cp-mark-as-complete]",function(){var e="#module_mark_as_complete_"+o(this).data("key");return i=lity(e,{template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close><?xml version="1.0" encoding="utf-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve"><style type="text/css">\n\t.st0{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n</style><title>Close</title><g id="Fail"><circle class="st0" cx="24" cy="24" r="23"></circle><g id="Cross"><line class="st0" x1="15" y1="15" x2="33" y2="33"></line><line class="st0" x1="15" y1="33" x2="33" y2="15"></line></g></g></svg></button></div></div></div>'}),!1}).on("click",".lity-close svg",function(){i.close()}).on("click",".leco-cp-sidebar h2:not(:first-of-type) a",function(){o(this).children(".iconset").toggleClass("hidden"),o(this).parent().next("ul").slideToggle()}).on("click",".module_mark_as_complete .btn",function(e){e.preventDefault();var s=o(this).parent().parent().attr("id").split("_"),l=s[4],t=s[5],a={action:"leco_cp_mark_as_complete",post_id:lecoCPVars.post_id,phase:l,key:t,_wpnonce:lecoCPVars._wpnonce};o.post(lecoCPVars.ajaxurl,a,function(e){-1!=e?(o("#m_"+l+"_"+t).removeClass("mark-as-complete").addClass("completed"),o("#m_"+l+"_"+t).find(".checkmark").removeAttr("data-leco-cp-mark-as-complete").find(".tooltip").html('Completed<span class="arrow"></span>')):console.log("Failed to update the module status.")}),i.close()}).on("click","#sidebar-open",function(){o(".leco-cp-sidebar").show(),o("#sidebar-close").removeClass("hidden"),o(this).addClass("hidden")}).on("click","#sidebar-close",function(){o(".leco-cp-sidebar").hide(),o("#sidebar-open").removeClass("hidden"),o(this).addClass("hidden")}).on("focus","#docsearch",function(){o(".search-feedback").removeClass("hidden"),o(this).val().length<3&&(o(".results-default").removeClass("hidden"),o(".has-results, .no-result").addClass("hidden"))}).on("blur","#docsearch",function(){o(".search-feedback").addClass("hidden")}).on("keyup","#docsearch",function(){var e=o(this).val().trim(),s={action:"leco_cp_live_portal_search",post_id:lecoCPVars.post_id,s:e,_wpnonce:lecoCPVars._wpnonce};clearTimeout(t),2<e.length?t=setTimeout(function(){o.post(lecoCPVars.ajaxurl,s,function(e){if(-1!=e){o(".has-results").removeClass("hidden"),o(".no-result, .results-default, .module-wrap").addClass("hidden");for(var s=0;s<e.data.length;s++)"string"==typeof e.data[s]?o("."+e.data[s]).removeClass("hidden"):o("#content_page_"+e.data[s]).removeClass("hidden")}else o(".has-results, .results-default").addClass("hidden"),o(".no-result, .module-wrap").removeClass("hidden")})},500):""===e&&(o(".has-results, .no-result").addClass("hidden"),o(".search-feedback, .results-default").removeClass("hidden"),o(".module-wrap").removeClass("hidden"))}).on("lity:ready",function(t,e){if(e.opener().find(".client-uploads-container")){var a=e.opener().attr("href"),s=o(t.target).find(".choose-files");(l=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:s[0],drop_element:t.target,url:lecoCPVars.ajaxurl,flash_swf_url:lecoCPVars.flash_swf_url,silverlight_xap_url:lecoCPVars.silverlight_xap_url,filters:lecoCPVars.filters,init:{Init:function(e){var s=o(t.target);e.features.dragdrop&&(s.addClass("drag-drop"),s.bind("dragover.wp-uploader",function(){o(t.target).find(".choose-files").addClass("drag-over")}).bind("dragleave.wp-uploader, drop.wp-uploader",function(){o(t.target).find(".choose-files").removeClass("drag-over")}))},UploadProgress:function(e,s){o("#"+s.id+" .progress").css("width",s.percent+"%")},FilesAdded:function(e,s){var l="";plupload.each(s,function(e){l+='<li id="'+e.id+'" class="client-uploads"><a href="file/'+e.id+'/" download><span class="progress"></span>'+e.name+" ("+plupload.formatSize(e.size)+') <span class="icon-download">\n                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px"\n                             y="0px" viewBox="0 0 48 48" style="enable-background:new 0 0 48 48;" xml:space="preserve">\n                            <title>Download</title>\n                            <g>\n                                <path class="st0" d="M43,31v6c0,3.3-3,6-6.6,6H11.6C8,43,5,40.3,5,37v-6"></path>\n                                <line class="st0" x1="24" y1="4" x2="24" y2="31"></line>\n                                <polyline class="st0" points="14,21 24,31 34,21  "></polyline>\n                            </g>\n                        </svg>\n                     </span></a></a>'+n.replace("{file-id}",e.id)+"</li>"}),o(t.target).find(".files").append(l),e.refresh(),e.start()},UploadComplete:function(e,s){var l={action:"leco_cp_client_upload_complete",post_id:lecoCPVars.post_id,module:a,_wpnonce:lecoCPVars._wpnonce,files:JSON.stringify(s)};o.post(lecoCPVars.ajaxurl,l,function(e){e.success?console.log(e):alert(e.data.message)})},FileUploaded:function(e,s,l){(l=JSON.parse(l.response)).data.error?(o("#"+s.id).hide("slow",function(){o(this).remove()}),alert(l.data.error)):s.file=l.data.file}},multipart_params:{action:"leco_cp_client_upload",post_id:lecoCPVars.post_id,module:a,_wpnonce:lecoCPVars._wpnonce}})).init(),l.bind("Error",function(e,s){alert(lecoCPVars.failed_to_upload+" "+s.file.name+". "+lecoCPVars.error+" "+s.message)})}}).on("lity:close",function(e,s){s.opener().parent().hasClass("client-uploads")&&l instanceof plupload.Uploader&&l.destroy()}).on("click",".file-delete",function(){var e=confirm(lecoCPVars.delete_client_upload),s=o(this);if(e){var l={action:"leco_cp_client_upload_delete",post_id:lecoCPVars.post_id,module:"#"+o(this).parent().parent().parent().attr("id"),_wpnonce:lecoCPVars._wpnonce,file_id:o(this).data("file-id")};o.post(lecoCPVars.ajaxurl,l,function(e){e.success?s.parent("li").hide("slow",function(){o(this).remove()}):alert(e.data.message)})}})});